define(["require","exports","tslib","dig-components/icons","dig-components/icons/src","dig-components/menu","modules/clean/file_store/utils","modules/clean/react/app_actions/redirect","modules/clean/react/css","modules/clean/react/extensions/cloud_docs_compat","modules/clean/react/extensions/common","modules/clean/react/extensions/data/helpers","modules/clean/react/extensions/extensions_mini_directory_modal","modules/clean/react/extensions/menu_survey","modules/clean/react/extensions/unity_and_cloud_editors","modules/clean/react/file_viewer/constants","modules/clean/react/file_viewer/open_button/types","modules/clean/react/file_viewer/unity/with_unity","modules/clean/static_urls","modules/core/i18n","react","modules/clean/react/file_viewer/file_conversion/file_conversion_options"],(function(e,t,n,i,o,r,s,c,a,l,u,d,p,m,f,_,A,g,h,v,y,E){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var O=(function(e){function t(t){var s=e.call(this,t)||this;return s.createAppActionClickHandler=function(e){return function(){var t=s.props,i=t.file,o=t.user,r=t.featureFlags,a=t.telemetryContext,d=t.updateLinkState;if(c.redirectToActionOrShowAuth(o,i,e,r,a,d),"redirect"===e.handler[".tag"]){var p=u.getAppActionExtras(e);u.logEvent(s.props.currentSession,"select_action",n.__assign({menu_version:2},p))}else if("cloud_editor"===e.handler[".tag"]){var m=l.isWopiAction(e)?A.OpenButtonAction.OPEN_WITH:A.OpenButtonAction.OPEN_WITH_CLOUD_DOC;u.logEvent(s.props.currentSession,"select_legacy_action",{type:m})}}},s.wrapperForAction=function(e){return{appAction:e,handler:s.createAppActionClickHandler(e),userAction:_.UserAction.OpenWithAppAction,actionName:e.description}},s.renderActionRow=function(e){var t,n=e.icon;t=n.is_static?h.static_url("/static/images/generic_app_icon-vflIPYT1H.png"):n.url;var i=e.description;return y.default.createElement(r.Menu.ActionItem,{key:e.id,value:s.wrapperForAction(e),withLeftAccessory:y.default.createElement("img",{alt:"",src:t,width:24,height:24})},i)},s.renderUnpromotedActions=function(e,t){var c=s.props,a=c.user,l=c.file,d=c.categoryIdToInfos,m=c.featureFlags,f=c.currentSession,_=c.telemetryContext,A=c.updateLinkState,g=c.isInActionBar,h=e.length>0;return y.default.createElement(r.Menu.ActionItem,{key:v.intl.formatMessage({id:"R/67N/",defaultMessage:"Show more"}),value:{handler:function(){var i=n.__spreadArrays(e,t);p.showExtensionsMiniDirectoryModal(v.intl.formatMessage({id:"KVD2SP",defaultMessage:"Open or edit with these apps"}),a,l,i,d,m,A,_,f),u.logEvent(f,h?"select_show_more":"select_add_app",{surface:_&&_.surface})}},withLeftAccessory:h&&!g?null:y.default.createElement(i.UIIcon,{src:o.AddCircleLine})},h?v.intl.formatMessage({id:"Gevpqz",defaultMessage:"Connect more apps"}):v.intl.formatMessage({id:"XFA09U",defaultMessage:"Connect apps"}))},s}return n.__extends(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.user,i=t.appActions,o=t.openOptions,s=t.bylines,c=t.currentSession,a=t.isInActionBar,l=u.getOpenOptionsWithLogging(o,c),p=d.partitionOptions(l),_=p.unityOptions,A=p.cloudEditorOptions,g=p.previewOption,h=d.partitionActions(i),v=h.cloudEditors,O=h.installedActions,w=h.unpromotedActions,x=O.length>0,M=w.length>0;return y.default.createElement(y.default.Fragment,null,y.default.createElement(E.FileConversionOptions,{openOptions:o,currentSession:c}),y.default.createElement(f.UnityAndCloudEditors,{unityOptions:_,legacyCloudEditorOptions:A,cloudEditorAppActions:v.map((function(t){return e.wrapperForAction(t)})),bylines:s,currentSession:c,previewOption:g}),a&&(x||M)&&y.default.createElement(r.Menu.Segment,null,O.map((function(t){return e.renderActionRow(t)})),this.renderUnpromotedActions(O,w)),!a&&x&&y.default.createElement(r.Menu.Segment,{key:"installed-actions"},O.map((function(t){return e.renderActionRow(t)}))),!a&&M&&y.default.createElement(r.Menu.Segment,null,this.renderUnpromotedActions(O,w)),y.default.createElement(m.OpenMenuSurvey,{userId:n.id,session:c}))},t})((y=n.__importDefault(y)).default.Component);t.ExtensionsPopoverV2WithUnity=function(e){return s.isBrowseFile(e.file)?y.default.createElement(g.WithUnity,{file:e.file,user:e.user,render:function(t){return y.default.createElement(O,n.__assign({},e,{unityInfo:t}))}}):null},t.ExtensionsPopoverV2NoUnity=a.requireCssWithComponent(O,["/static/css/app_actions/index-vflWo59zK.css","/static/css/extensions/index-vflbYwcKR.css"])}));
//# sourceMappingURL=extensions_popover_content_component_v2.min.js-vflpf_x7T.map