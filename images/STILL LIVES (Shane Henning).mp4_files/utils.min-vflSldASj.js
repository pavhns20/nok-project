define(["require","exports","tslib","modules/clean/cloud_docs/open_with_utils","modules/clean/file_store/utils","modules/clean/open_with","modules/clean/react/extensions/connect_flow","modules/clean/react/extensions/utils","modules/clean/react/file_viewer/constants","modules/clean/react/file_viewer/data/actions","modules/clean/react/file_viewer/file_conversion/decompress","modules/clean/react/file_viewer/file_conversion/utils","modules/clean/react/file_viewer/open_button/types","modules/clean/react/file_viewer/open_with_helpers","modules/clean/react/file_viewer/unity/unity_utils","modules/clean/react/paper/utils","modules/clean/static_urls","modules/core/i18n"],(function(e,n,t,i,o,r,s,l,a,u,p,c,d,f,_,h,O,m){"use strict";function v(e,n,o,r){var s;if(r.provider===i.OpenWithCloudDocProvider.GoogleDSS)s={type:d.OpenButtonAction.OPEN_WITH_CLOUD_DOC,userAction:a.UserAction.OpenWithCloudDocEditor};else{if(r.provider!==i.OpenWithCloudDocProvider.OfficeOnline)return null;s={type:d.OpenButtonAction.OPEN_WITH,userAction:a.UserAction.OpenInOfficeOnline}}return t.__assign({handler:function(){return r.handler(e,n,o)},spriteName:r.spriteName||null,iconUrl:r.iconUrl,text:r.text},s)}function A(e){for(var n=e.file,t=e.user,o=e.isOpenWithDisabled,r=[],s={gdd:!e.isCloudEditorDisabled,wopi:g({file:n,isOpenWithDisabled:o,user:t})},l=e.actionSource,a=0,u=i.getOpenWithCloudEditorInfo(n,t,s,l);a<u.length;a++){var p=v(n,t,l,u[a]);p&&r.push(p)}return r}function g(e){var n=e.file,t=e.isOpenWithDisabled,i=e.user;return!t&&f.OpenWithHelpers.canOpenWith(n,i)}function y(e,n){var t=(e?e.open_application_name:void 0)||m.intl.formatMessage({id:"Uyxn/h",defaultMessage:"Desktop"});return n?t:m.intl.formatMessage({id:"KtD8FA",defaultMessage:"Open in {app_name}"},{app_name:t})}function w(e){var n=(null!==e?e.file_browser_display_name:void 0)||m.intl.formatMessage({id:"Bbnzjx",defaultMessage:"File Browser"});return m.intl.formatMessage({id:"suwlZc",defaultMessage:"Show in {file_browser}"},{file_browser:n})}function U(e){var n=e.file,t=e.isFolder,i=e.user;return function(){_.UnityHelpers.openFile(n.ns_id,n.ns_path,i.id,t)}}function I(e){var n=e.file,t=e.user;return function(){h.openFileInPaper({file:n,user:t})}}Object.defineProperty(n,"__esModule",{value:!0}),r=t.__importDefault(r),n.getOpenOptions=function(e){var n=e.file,r=t.__rest(e,["file"]);return o.isBrowseFile(n)?(function(e){var n=e.file,t=e.hasOpenInPaperSupport,o=e.isUnityDisabled,r=e.isOpenWithDisabled,f=e.isCloudEditorDisabled,h=e.unityInfo,A=e.extraOptions,D=e.user,E=e.sharingServiceInfo,b=e.refreshSharingServiceInfo,S=e.showOpenWithShare,F=e.onPresentInZoom,M=e.isCloudBasedDoc,N=e.actionSource,P=e.landingPagesEnabled,x=e.shouldUseShortUnityText,W=e.previewActionHandler,B=[];c.canExtractFile(n)&&B.push({handler:function(){return p.decompressFile(n,D)},spriteName:null,iconUrl:O.static_url("/static/images/file_transfer/file_icons/zip-vfl1lY35B.png"),text:m.intl.formatMessage({id:"u1R/iY",defaultMessage:"Extract all"}),type:d.OpenButtonAction.DECOMPRESS_FILE,userAction:a.UserAction.DecompressFile});W&&B.push({handler:W,spriteName:null,text:m.intl.formatMessage({id:"wHolW4",defaultMessage:"Preview (Dropbox)"}),type:d.OpenButtonAction.PREVIEW_FILE,userAction:a.UserAction.PreviewFile});if(!h)return B;t&&B.push({handler:I({file:n,user:D}),spriteName:"paper",text:m.intl.formatMessage({id:"MhNU0E",defaultMessage:"Copy to Paper"}),type:d.OpenButtonAction.OPEN_IN_PAPER,userAction:a.UserAction.CopyToPaper});!M&&(function(e){var n=e.isUnityDisabled,t=e.unityInfo;return null!=t&&!n&&_.UnityHelpers.isUnityFileSupported(t)})({isUnityDisabled:o,unityInfo:h})&&B.push({handler:U({file:n,user:D,isFolder:!1}),spriteName:"ow_desktop",text:y(h,x),type:d.OpenButtonAction.UNITY_FILE,userAction:a.UserAction.OpenInUnity});for(var C=g({file:n,isOpenWithDisabled:r,user:D}),H={gdd:!f,wopi:C},T=i.getOpenWithCloudEditorInfo(n,D,H,N),L=0,k=T;L<k.length;L++){var R=k[L],Z=v(n,D,N,R);Z&&B.push(Z)}(function(e){var n=e.isUnityDisabled,t=e.unityInfo;return null!=t&&!n&&_.UnityHelpers.isUnityFolderSupported(t)})({isUnityDisabled:o,unityInfo:h})&&B.push({handler:U({file:n,user:D,isFolder:!0}),spriteName:"ow_folder",text:w(h),type:d.OpenButtonAction.UNITY_FOLDER,userAction:a.UserAction.OpenInUnityFolder});A&&A.forEach((function(e){e&&B.push(e)}));B.length||M||B.push({handler:function(){return u.download(n)},spriteName:null,text:m.intl.formatMessage({id:"pHnJw0",defaultMessage:"Download"}),type:d.OpenButtonAction.DOWNLOAD,userAction:a.UserAction.Download});var Y=!1,z=!1;S&&E&&(Y=l.isSlackAvailable(E),z=l.isZoomAvailable(E));Y&&E&&b&&B.push({handler:function(){return s.shareInSlackFlow(D,E,b,n,"open_with_button",void 0!==P?P:null)},spriteName:null,text:m.intl.formatMessage({id:"Qws4v2",defaultMessage:"Slack"}),type:d.OpenButtonAction.SHARE_TO_SLACK,userAction:a.UserAction.ShareToSlack});z&&E&&F&&b&&B.push({handler:function(){return s.presentInZoomFlow(D,E,b,F,"open_with_button",void 0!==P?P:null)},spriteName:null,text:m.intl.formatMessage({id:"mzy+1c",defaultMessage:"Zoom"}),type:d.OpenButtonAction.PRESENT_IN_ZOOM,userAction:a.UserAction.PresentInZoom});return B})(t.__assign({file:n},r)):o.isSharedFile(n)?A(t.__assign({file:n},r)):[]},n.convertOpenWithCloudEditorInfo=v,n.getOpenOptionsSharedFile=A,n.shouldShowCoachmark=function(e,n){var t=e.map((function(e){return e.type})).includes(d.OpenButtonAction.UNITY_FILE),i=n&&r.default.is_adobe_app(n.open_application_identifier),o=e.map((function(e){return e.type})).includes(d.OpenButtonAction.OPEN_WITH);return t&&i||o}}));
//# sourceMappingURL=utils.min.js-vflOOaXSy.map